webpackJsonp([2],{BQbL:function(e,t){},"RX/n":function(e,t){},a7RX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Vp1X"),s=n("suuf"),a={service:new s.a,name:"place-actions",data:function(){return{agent_published:this.published,place_expired:this.expired}},mixins:[i.a],props:{expired:{required:!0},slug:{required:!0},published:{required:!0},index:{required:!0}},methods:{publish:function(){var e=this;this.published?this.mixin_handleRequest(this.$options.service.publishPlaceToggle({place_slug:this.slug}).then(function(t){e.agent_published=!1,e.$emit("place-unpublished",e.index)})):this.mixin_handleRequest(this.$options.service.publishPlaceToggle({place_slug:this.slug}).then(function(t){e.agent_published=!0,e.$emit("place-published",e.index)}))},deletePlace:function(){var e=this;confirm("Do you want to delete this and all its content?")&&this.mixin_handleRequest(this.$options.service.deletePlace({place_slug:this.slug}).then(function(t){e.$emit("delete-place",e.index),e.$store.dispatch("common/updateSnackBar",{show:!0,msg:"Deleted",color:""})}))},renew:function(){var e=this;this.mixin_handleRequest(this.$options.service.renewPlace({place_slug:this.slug}).then(function(t){e.place_expired=!0,e.$emit("place-renewed",e.index)}))}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-xs-center"},[n("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{dark:"",color:"grey lighten-2",loading:e.loading,icon:""}},i),[n("v-icon",[e._v("more_vert")])],1)]}}])},[e._v(" "),n("v-list",[n("v-list-tile",{on:{click:e.deletePlace}},[n("v-list-tile-action",[n("v-icon",[e._v("delete")])],1),e._v(" "),n("v-list-tile-title",[e._v("Delete")])],1),e._v(" "),n("v-list-tile",{on:{click:e.publish}},[n("v-list-tile-action",[n("v-icon",[e._v("delete")])],1),e._v(" "),e.agent_published?n("v-list-tile-title",[e._v(" UnPublish")]):n("v-list-tile-title",[e._v(" Publish")])],1),e._v(" "),e.place_expired?n("v-list-tile",{on:{click:e.renew}},[n("v-list-tile-action",[n("v-icon",[e._v("delete")])],1),e._v(" "),n("v-list-tile-title",[e._v(" Renew ")])],1):e._e()],1)],1)],1)},staticRenderFns:[]};var c=n("VU/8")(a,l,!1,function(e){n("RX/n")},null,null).exports,u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-inline"},[this.published?t("v-chip",{staticClass:"caption font-weight-medium",attrs:{small:"",left:"",color:"green lighten-2"}},[this._v("Published")]):t("v-chip",{staticClass:"caption font-weight-medium",attrs:{small:"",left:"",color:"grey lighten-2"}},[this._v("Not Published")]),this._v(" "),this.expired?t("v-chip",{staticClass:"caption font-weight-medium",attrs:{small:"",left:"",color:"red"}},[this._v("Expired")]):this._e()],1)},staticRenderFns:[]};var r=n("VU/8")({name:"flags",data:function(){return{place_published:this.published,place_expired:this.expired}},props:{published:{required:!0},expired:{required:!0}}},u,!1,function(e){n("al3Y")},null,null).exports,o={service:new s.a,data:function(){return{placeList:[]}},components:{PlaceActions:c,Flags:r},mixins:[i.a],created:function(){var e=this;this.mixin_handleRequest(this.$options.service.getAgentPlacesList({agent_slug:this.$route.params.agentSlug}).then(function(t){t.data.forEach(function(t){e.placeList.push(t)})}))},computed:{places:function(){return this.placeList}},methods:{publishPlace:function(e){var t=this.placeList[e];t.agent_published=1,this.placeList.splice(e,1,t)},unPublishPlace:function(e){var t=this.placeList[e];t.agent_published=0,this.placeList.splice(e,1,t)},unexpirePlace:function(e){var t=this.placeList[e];t.expired=0,this.placeList.splice(e,1,t)},createPlace:function(){this.$store.getters["auth/getUser"].agent_statistics.max_no_places>0?this.$router.push({name:"createEdit"}):(this.$store.dispatch("common/updateSnackBar",{show:!0,msg:"You do not have enough subscription to continue",color:""}),this.seePlanList())},editPlace:function(e){this.$router.push({name:"createEdit",params:{placeSlug:e}})},deletePlace:function(e){this.placeList.splice(e,1)},seePlanList:function(){this.$router.push({name:"ourPackages"})}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.$vuetify.breakpoint.smAndDown?n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[e.places.length>0?n("v-list",{staticClass:"pt-2",attrs:{"two-line":"",subheader:""}},[n("div",{staticClass:"d-flex justify-space-between"},[n("v-subheader",[e._v("Your Places "),n("v-chip",{attrs:{"align-end":""}},[e._v(e._s(e.places.length))])],1)],1),e._v(" "),e._l(e.places,function(t,i){return[n("div",{key:t.id,attrs:{index:i}},[n("v-list-tile",{attrs:{ripple:"",avatar:""}},[n("v-list-tile-avatar",[n("v-avatar",{attrs:{color:"blue-grey lighten-5"}},[n("v-icon",{on:{click:function(n){return e.editPlace(t.slug)}}},[e._v("edit")])],1)],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[n("div",{staticClass:"subheading font-weight-bold"},[e._v(e._s(t.category.name))])]),e._v(" "),n("v-list-tile-sub-title",[n("div",{staticClass:"text--grey lighten-4 subheading text-capitalize"},[n("v-icon",{staticClass:"pr-2 lighten-4",attrs:{size:"18px"}},[e._v("place")]),e._v(" "),n("span",{staticClass:"text-capitalize"},[e._v(e._s(t.location)+", "+e._s(t.state))])],1)]),e._v(" "),n("flags",{attrs:{expired:t.expired,published:t.agent_published}})],1),e._v(" "),n("v-list-tile-action",[n("place-actions",{attrs:{published:t.agent_published,expired:t.expired,slug:t.slug,index:i},on:{"delete-place":e.deletePlace,"place-published":e.publishPlace,"place-unpublished":e.unPublishPlace,"place-renewd":e.unexpirePlace}})],1)],1),e._v(" "),n("v-divider",{attrs:{inset:""}})],1)]}),e._v(" "),n("v-list-tile",[n("v-btn",{staticClass:"mx-auto",attrs:{color:"success",outline:""},on:{click:function(t){return e.seePlanList()}}},[e._v("Subscribe to Add more Places")])],1)],2):n("div",{staticClass:"pa-2 ma-3 text-xs-center subheading font-weigh-bold text--grey"},[e._v("\r\n                Nothing to display\r\n               \r\n                ")])],1),e._v(" "),n("v-btn",{staticStyle:{right:"40%"},attrs:{fab:"",dark:"",color:"primary",fixed:"",bottom:""},on:{click:function(t){return e.createPlace()}}},[n("v-icon",{attrs:{dark:""}},[e._v("add")])],1)],1):e._e()],1)},staticRenderFns:[]};var p=n("VU/8")(o,h,!1,function(e){n("BQbL")},null,null);t.default=p.exports},al3Y:function(e,t){},suuf:function(e,t,n){"use strict";var i=n("//Fk"),s=n.n(i),a=n("Zrlr"),l=n.n(a),c=n("wxAW"),u=n.n(c),r=n("7+uW"),o=n("gyMJ"),h=function(){function e(){l()(this,e)}return u()(e,[{key:"removeImage",value:function(e){return r.default.http.post(o.n(e.get("place_slug")),e).then(function(e){return new s.a(function(t){t(e)})}).catch(function(e){return new s.a(function(t,n){n(e)})})}},{key:"saveImage",value:function(e,t){return r.default.http.post(o.o(e),t).then(function(e){return new s.a(function(t){t(e)})}).catch(function(e){return new s.a(function(t,n){n(e)})})}},{key:"saveFeatures",value:function(e){return r.default.http.post(o.m(e.place_slug),e).then(function(e){return new s.a(function(t){t(e)})}).catch(function(e){return new s.a(function(t,n){n(e)})})}},{key:"savePlace",value:function(e,t){var n="";return n=t?o.j(e.slug):o.i,r.default.http.post(n,e).then(function(e){return new s.a(function(t){t(e)})}).catch(function(e){return new s.a(function(t,n){n(e)})})}},{key:"getCategoryList",value:function(){return r.default.http.get(o.A).then(function(e){return new s.a(function(t){t(e)})}).catch(function(e){return new s.a(function(t,n){n(e)})})}},{key:"getAgentPlacesList",value:function(e){return r.default.http.get(o.a,{params:e}).then(function(e){return new s.a(function(t){t(e)})}).catch(function(e){return new s.a(function(t,n){n(e)})})}},{key:"deletePlace",value:function(e){return r.default.http.post(o.b(e.place_slug)).then(function(e){return new s.a(function(t){t(e)})}).catch(function(e){return new s.a(function(t,n){n(e)})})}},{key:"publishPlaceToggle",value:function(e){return r.default.http.post(o.g(e.place_slug)).then(function(e){return new s.a(function(t){t(e)})}).catch(function(e){return new s.a(function(t,n){n(e)})})}},{key:"renewPlace",value:function(e){return r.default.http.post(o.h(e.place_slug)).then(function(e){return new s.a(function(t){t(e)})}).catch(function(e){return new s.a(function(t,n){n(e)})})}}]),e}();t.a=h}});
//# sourceMappingURL=2.e39e7ecfb2a87340bec1.js.map