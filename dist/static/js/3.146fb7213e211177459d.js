webpackJsonp([3],{JXi0:function(t,e){},bZvd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("i1+X");var a=n("qgVB"),r={components:{paystack:n.n(a).a},data:function(){return{plan:{},paystackkey:"pk_test_22bdd340817a7abd23c1ade4fb5f131c60be3e7f",loading:!1}},computed:{reference:function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<10;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},paystackMetaData:function(){return{package_id:this.$route.params.planID}},agentEmail:function(){return this.$store.getters["auth/getUser"].email}},created:function(){this.getPlan(this.$route.params.planID)},mounted:function(){this.placeOrder()},methods:{callback:function(t){var e=this;"success"==t.status?(this.loading=!0,this.$store.dispatch("dashboard_store/confirmPayment",t.trxref).then(function(t){e.$store.dispatch("auth/retrieveUser"),e.$router.push({name:"MyPlaces",params:{agentSlug:e.$store.getters["auth/getUser"].slug}}),e.$store.dispatch("common/updateSnackBar",{show:!0,msg:"Payment Successfull: A receipt has been sent to your Mail",color:""})}).catch(function(t){409==t.response.status&&e.$store.dispatch("common/updateSnackBar",{show:!0,msg:"Payment was not successful",color:""}),e.$router.push({name:"ourPackages"})}).finally(function(){e.loading=!1})):(this.$store.dispatch("common/updateSnackBar",{show:!0,msg:"Unable to Make Transaction",color:""}),this.$router.push({name:"OurPackages"}))},close:function(){},getPlan:function(t){var e=this;this.$store.dispatch("dashboard_store/retrievePlan",t).then(function(t){e.plan=t.data})}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"pricing-wrapper clearfix"},[n("div",{staticClass:"pricing-table"},[n("h3",{staticClass:"pricing-title"},[t._v(t._s(t.plan.package_name))]),t._v(" "),n("div",{staticClass:"price"},[t._v("N "+t._s(t.plan.price))]),t._v(" "),n("ul",{staticClass:"table-list"},[n("li",[t._v(t._s(t.plan.quantity_slot)+"  "),n("span",[t._v("Slots")])]),t._v(" "),n("li",[t._v(t._s(t.plan.duration_days)+" days "),n("span",[t._v("Duration")])]),t._v(" "),n("li",[t._v("Expires on "),n("span",[t._v(" "+t._s(t.plan.expires_on))])])]),t._v(" "),n("div",{staticClass:"table-buy"},[n("p",[t._v("N "+t._s(t.plan.price))]),t._v(" "),n("div",{staticClass:"pricing-action"},[n("paystack",{attrs:{metadata:t.paystackMetaData,amount:100*t.plan.price,email:t.agentEmail,paystackkey:t.paystackkey,reference:t.reference,callback:t.callback,close:t.close,embed:!1}},[n("i",{staticClass:"fas fa-money-bill-alt"}),t._v(" "),n("v-btn",{staticClass:"btn-color-action",attrs:{loading:t.loading,flat:"",disabled:t.loading},on:{click:function(e){t.loading=!0}}},[t._v("BUY")])],1)],1)])])])])],1)},staticRenderFns:[]};var i=n("VU/8")(r,c,!1,function(t){n("JXi0")},"data-v-19887328",null);e.default=i.exports},"i1+X":function(t,e,n){"use strict";var a=n("//Fk"),r=n.n(a),c=n("IcnI"),i=n("7+uW"),o=n("gyMJ");c.a.registerModule("dashboard_store",{namespaced:!0,state:{planList:[]},getters:{planList:function(t){return t.planList}},mutations:{addPlan:function(t,e){t.planList.push(e)}},actions:{retrieveMySubscriptions:function(t){t.commit;return new r.a(function(t,e){i.default.http.get(o.t).then(function(e){t(e)}).catch(function(t){e(t)})})},confirmPayment:function(t,e){t.commit;return new r.a(function(t,n){i.default.http.post(o.w,{transaction_ref:e}).then(function(e){t(e)}).catch(function(t){n(t)})})},cancelOrder:function(t){t.commit},retrievePlans:function(t){var e=t.commit;if(t.state.planList.length<1)return new r.a(function(t,n){i.default.http.get(o.u).then(function(n){n.data.forEach(function(t){e("addPlan",t)}),t(n)}).catch(function(t){n(t)})})},retrievePlan:function(t,e){t.commit;return new r.a(function(t,n){i.default.http.get(o.v(e)).then(function(e){t(e)}).catch(function(t){n(t)})})},publishPlace:function(t,e){t.commit;return new r.a(function(t,n){i.default.http.post(o.k(e.place_slug)).then(function(e){t(e)}).catch(function(t){n(t)})})},unpublishPlace:function(t,e){t.commit;return new r.a(function(t,n){i.default.http.post(o.l(e.place_slug)).then(function(e){t(e)}).catch(function(t){n(t)})})}}})},qgVB:function(t,e,n){var a;window,a=function(){return function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:a})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(a,r,function(e){return t[e]}.bind(null,r));return a},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=0)}([function(t,e,n){"use strict";n.r(e);var a=function(t,e,n,a,r,c,i,o){var s,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=[],u._compiled=!0),s)if(u.functional){u._injectStyles=s;var l=u.render;u.render=function(t,e){return s.call(e),l(t,e)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,s):[s]}return{exports:t,options:u}}({props:{embed:{type:Boolean,default:!1},paystackkey:{type:String,required:!0},email:{type:String,required:!0},amount:{type:Number,required:!0},reference:{type:String,required:!0},callback:{type:Function,required:!0,default:function(){}},close:{type:Function,required:!0,default:function(){}},metadata:{type:Object,default:function(){return{}}},currency:{type:String,default:"NGN"},plan:{type:String,default:""},quantity:{type:String,default:""},subaccount:{type:String,default:""},transactionCharge:{type:Number,default:0},bearer:{type:String,default:""}},computed:{scriptLoaded:function(){var t=this;return new Promise(function(e){t.loadScript(function(){e()})})}},mounted:function(){this.embed&&this.payWithPaystack()},methods:{loadScript:function(t){var e=document.createElement("script");e.src="https://js.paystack.co/v1/inline.js",document.getElementsByTagName("head")[0].appendChild(e),e.readyState?e.onreadystatechange=function(){"loaded"!==e.readyState&&"complete"!==e.readyState||(e.onreadystatechange=null,t())}:e.onload=function(){t()}},payWithPaystack:function(){var t=this;this.scriptLoaded.then(function(){var e={key:t.paystackkey,email:t.email,amount:t.amount,ref:t.reference,callback:function(e){t.callback(e)},onClose:function(){t.close()},metadata:t.metadata,currency:t.currency,plan:t.plan,quantity:t.quantity,subaccount:t.subaccount,transaction_charge:t.transaction_charge,bearer:t.bearer};t.embed&&(e.container="paystackEmbedContainer");var n=window.PaystackPop.setup(e);t.embed||n.openIframe()})}}},function(){var t=this,e=t._self._c||t.$createElement;return t.embed?e("div",{attrs:{id:"paystackEmbedContainer"}}):e("button",{staticClass:"payButton",on:{click:t.payWithPaystack}},[t._t("default",[t._v("Make Payment")])],2)});e.default=a.exports}])},t.exports=a()}});
//# sourceMappingURL=3.146fb7213e211177459d.js.map